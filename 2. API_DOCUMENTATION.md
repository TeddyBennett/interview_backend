# API Documentation - Interview Backend

This documentation outlines the RESTful API endpoints available in the system.

## Authentication Overview

The system uses a two-level security architecture:
1.  **API Key Authorization (`x-api-key`)**: Validates that the request is coming from a registered client application.
2.  **JWT Authorization (`Bearer Token`)**: Authenticates the specific user or administrator.

---

## ğŸ” Authentication Endpoints

### POST `/api/user/login`
Authenticates a user and returns a JWT.

**Request Body:**
```json
{
  "username": "string",
  "password": "string"
}
```

**Response (200 OK):**
```json
{
  "success": true,
  "statusCode": 200,
  "data": {
    "token": "JWT_TOKEN_HERE"
  }
}
```

### POST `/api/admin/login`
Authenticates an administrator.

**Request Body:**
```json
{
  "username": "admin",
  "password": "password"
}
```

---

## ğŸ›¡ï¸ Admin Management (Admin Only)
Requires `Admin` role JWT.

### POST `/api/admin/apikeys`
Creates a new API key for a client.

**Request Body:**
```json
{
  "clientName": "Mobile App",
  "expiresAt": "2026-12-31T23:59:59Z"
}
```

**Response:** Returns the raw API key **once**. Securely store it.

---

## ğŸ‘¤ User Profile & Management
Requires `x-api-key` and `Bearer Token`.

### GET `/api/user/profile`
Retrieve the profile of the currently authenticated user.

### POST `/api/user/create`
Create a new user.
**Content-Type**: `multipart/form-data` (Supports Profile Image upload).

---

## ğŸ›« Passenger Management
Requires `x-api-key` and `Bearer Token`.

### POST `/api/Passenger`
Create a new passenger record.
**Content-Type**: `multipart/form-data`

**Form Fields:**
| Name | Type | Description |
|------|------|-------------|
| FirstName | string | Passenger First Name |
| LastName | string | Passenger Last Name |
| DateOfBirth | date | YYYY-MM-DD |
| Gender | string | Male/Female |
| FaceImage | file | Binary image file |
| IdfDocTypeId | int | ID from DocumentTypes |
| IdfDocNumber| string | Document Number |

### GET `/api/Passenger`
Get a list of all passengers.

### GET `/api/Passenger/{id}`
Retrieve details for a specific passenger.

### PUT `/api/Passenger/{id}`
Update passenger info (via `multipart/form-data`).

### DELETE `/api/Passenger/{id}`
Delete a passenger record.

---

## ğŸ“¦ Standard Response Format

All API responses follow this consistent structure:

```json
{
  "success": boolean,
  "statusCode": integer,
  "message": "string (optional)",
  "data": object/array (optional)
}
```

## ğŸ› ï¸ Error Codes
- `400`: Bad Request (Validation failed)
- `401`: Unauthorized (Missing/Invalid Token or API Key)
- `403`: Forbidden (Insufficient roles)
- `404`: Not Found
- `500`: Internal Server Error
